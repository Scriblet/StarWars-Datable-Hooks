(this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]=this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]||[]).push([[0],{22:function(e,t,a){e.exports=a(33)},29:function(e,t,a){},33:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(20),c=a.n(l),o=(a(27),a(8)),u=a(10),i=a.n(u),m=a(13),s=a(15),d=a(6),f=function(){var e=Object(s.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://swapi-trybe.herokuapp.com/api/planets/",e.next=3,fetch("https://swapi-trybe.herokuapp.com/api/planets/");case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a.results);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=Object(n.createContext)();var b=function(e){var t=e.children,a=Object(n.useState)([]),l=Object(d.a)(a,2),c=l[0],u=l[1],b=Object(n.useState)(""),E=Object(d.a)(b,2),v=E[0],j=E[1],O=Object(n.useState)("population"),h=Object(d.a)(O,2),y=h[0],C=h[1],g=Object(n.useState)("maior que"),F=Object(d.a)(g,2),k=F[0],S=F[1],x=Object(n.useState)(0),w=Object(d.a)(x,2),B=w[0],_=w[1],N=Object(n.useState)([]),V=Object(d.a)(N,2),A=V[0],q=V[1],L=Object(n.useState)([]),z=Object(d.a)(L,2),D=z[0],T=z[1],J=Object(n.useState)({filterByName:{},filterByNumericValues:[],order:{column:"name",sort:"ASC"}}),P=Object(d.a)(J,2),H=P[0],I=P[1];Object(n.useEffect)((function(){function e(){return(e=Object(s.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:t=e.sent,u(Object(m.a)(t)),q(Object(m.a)(t)),a=Object.keys(t[0]),T(a.filter((function(e){return"residents"!==e})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(n.useEffect)((function(){var e=H.filterByName,t=H.filterByNumericValues,a=H.order,n=Object(m.a)(c);if(e.name){var r=e.name;n=n.filter((function(e){return e.name.includes(r)}))}0!==t.length&&t.forEach((function(e){var t=e.column,a=e.comparison,r=e.value;"maior que"===a&&(n=n.filter((function(e){return parseFloat(e[t])>parseFloat(r)}))),"menor que"===a&&(n=n.filter((function(e){return parseFloat(e[t])<parseFloat(r)}))),"igual a"===a&&(n=n.filter((function(e){return parseFloat(e[t])===parseFloat(r)})))}));var l=function(e,t){return e[a.column]-t[a.column]},o=function(e,t){return t[a.column]-e[a.column]};"ASC"===a.sort?"orbital_period"===a.column||"rotation_period"===a.column||"diameter"===a.column||"surface_water"===a.column||"population"===a.column?n.sort(l):n.sort((function(e,t){return e[a.column]>t[a.column]?1:e[a.column]<t[a.column]?-1:0})):"orbital_period"===a.column||"rotation_period"===a.column||"diameter"===a.column||"surface_water"===a.column||"population"===a.column?n.sort(o):n.sort((function(e,t){return e[a.column]>t[a.column]?-1:e[a.column]<t[a.column]?1:0})),q(n)}),[H,c]);var K={response:c,planetsArray:A,keysFiltered:D,filters:H,column:y,comparison:k,value:B,name:v,setPlanets:q,setName:j,setResponse:u,setColumn:C,setComparison:S,setFilters:I,setValue:_,inputFilter:function(e){I(Object(o.a)(Object(o.a)({},H),{},{filterByName:{name:e}}))},buttonFilter:function(){var e={column:y,comparison:k,value:B};I(Object(o.a)(Object(o.a)({},H),{},{filterByNumericValues:[].concat(Object(m.a)(H.filterByNumericValues),[e])}))},setKeysFiltered:T};return r.a.createElement(p.Provider,{value:K},t)},E=(a(29),a(34)),v=a(35),j=a(37),O=a(11),h=a(36);var y=function(){var e=Object(n.useState)(["population","orbital_period","diameter","rotation_period","surface_water"]),t=Object(d.a)(e,1)[0],a=Object(n.useState)("name"),l=Object(d.a)(a,2),c=l[0],u=l[1],i=Object(n.useState)("ASC"),m=Object(d.a)(i,2),s=m[0],f=m[1],b=Object(n.useContext)(p),E=b.inputFilter,y=b.setColumn,C=b.setComparison,g=b.setValue,F=b.buttonFilter,k=b.filters,S=b.setFilters,x=b.keysFiltered,w=k.filterByNumericValues;return r.a.createElement("div",null,r.a.createElement(v.a,null,r.a.createElement(v.a.Label,{htmlFor:"name-filter"},"Filtrar por nome",r.a.createElement(v.a.Control,{size:"sm",type:"text",id:"name-filter","data-testid":"name-filter",onChange:function(e){return E(e.target.value)}})),r.a.createElement("br",null),r.a.createElement(v.a.Label,{htmlFor:"column-filter"},"Selecione sua coluna",r.a.createElement(v.a.Control,{as:"select",size:"sm",name:"column-filter",id:"column-filter","data-testid":"column-filter",onChange:function(e){return y(e.target.value)}},t.filter((function(e){return!w.some((function(t){return e===t.column}))})).map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement(v.a.Label,{htmlFor:"value-range"},"Faixa de Valor",r.a.createElement(v.a.Control,{as:"select",size:"sm",name:"value-range",id:"value-range","data-testid":"comparison-filter",onChange:function(e){return C(e.target.value)}},r.a.createElement("option",{value:"maior que"},"maior que"),r.a.createElement("option",{value:"menor que"},"menor que"),r.a.createElement("option",{value:"igual a"},"igual a"))),r.a.createElement(v.a.Label,{htmlFor:"value-filter"},"Valor",r.a.createElement(v.a.Control,{size:"sm",id:"value-filter","data-testid":"value-filter",type:"number",onChange:function(e){return g(e.target.value)}})),r.a.createElement(j.a,{type:"button","data-testid":"button-filter",onClick:function(){F()}},"Filtrar"),r.a.createElement("br",null),r.a.createElement(v.a.Label,{htmlFor:"collumn"},"Ordernar por coluna",r.a.createElement(v.a.Control,{as:"select",size:"sm",name:"column-sort",id:"column-sort","data-testid":"column-sort",onChange:function(e){return u(e.target.value)}},x.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement(O.a.Label,{htmlFor:"radio-asc"},"Ascendente",r.a.createElement(v.a.Check,{name:"order",type:"radio",id:"radio-asc",checked:"ASC"===s,value:"ASC","data-testid":"column-sort-input-asc",onChange:function(e){return f(e.target.value)}})),r.a.createElement(O.a.Label,{htmlFor:"radio-dsc"},"Descendente",r.a.createElement(v.a.Check,{name:"order",type:"radio",id:"radio-dsc",checked:"DESC"===s,value:"DESC","data-testid":"column-sort-input-desc",onChange:function(e){return f(e.target.value)}})),r.a.createElement(j.a,{type:"button","data-testid":"column-sort-button",onClick:function(){S(Object(o.a)(Object(o.a)({},k),{},{order:{column:c,sort:s}}))}},"Ordernar")),w.length>0&&w.map((function(e,t){return r.a.createElement(h.a,{bg:"light",key:e,"data-testid":"filter",style:{width:"10rem"}},r.a.createElement(h.a.Header,null,"Filtro ".concat(t+1)),r.a.createElement(h.a.Body,null,r.a.createElement(h.a.Text,null,e.column),r.a.createElement(h.a.Text,null,e.comparison),r.a.createElement(h.a.Text,null,e.value)),r.a.createElement(j.a,{variant:"danger",type:"button",onClick:function(){return t=e.column,void S(Object(o.a)(Object(o.a)({},k),{},{filterByNumericValues:k.filterByNumericValues.filter((function(e){return e.column!==t}))}));var t}},"X"))})))};var C=function(){var e=Object(n.useContext)(p),t=e.planetsArray,a=e.keysFiltered;return t.length>0?r.a.createElement("div",null,r.a.createElement(y,null),r.a.createElement(E.a,{striped:!0,bordered:!0,hover:!0,responsive:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,a.map((function(e){return r.a.createElement("th",{key:e.name},e)})))),r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement("tr",{key:e},r.a.createElement("td",{"data-testid":"planet-name"},e.name),r.a.createElement("td",null,e.rotation_period),r.a.createElement("td",null,e.orbital_period),r.a.createElement("td",null,e.diameter),r.a.createElement("td",null,e.climate),r.a.createElement("td",null,e.gravity),r.a.createElement("td",null,e.terrain),r.a.createElement("td",null,e.surface_water),r.a.createElement("td",null,e.population),r.a.createElement("td",null,e.films),r.a.createElement("td",null,e.created),r.a.createElement("td",null,e.edited),r.a.createElement("td",null,e.url))}))))):r.a.createElement("div",null,r.a.createElement(y,null))};var g=function(){return r.a.createElement(b,null,r.a.createElement(C,null))};c.a.render(r.a.createElement(g,null),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.62258536.chunk.js.map